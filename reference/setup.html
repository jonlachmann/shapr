<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>check_setup — setup • shapr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="check_setup — setup"><meta property="og:description" content="check_setup"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">shapr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.3.9200</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/understanding_shapr.html">General usage of shapr</a>
    </li>
    <li>
      <a href="../articles/understanding_shapr_vaeac.html">Advanced usage of the `vaeac` approach</a>
    </li>
    <li>
      <a href="../articles/understanding_shapr_regression.html">The separate and surrogate regression approches</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">News</a>
</li>
<li>
  <a href="../reference/index.html">Manual</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/NorskRegnesentral/shapr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>check_setup</h1>
    <small class="dont-index">Source: <a href="https://github.com/NorskRegnesentral/shapr/blob/master/R/setup.R" class="external-link"><code>R/setup.R</code></a></small>
    <div class="hidden name"><code>setup.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>check_setup</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">setup</span><span class="op">(</span></span>
<span>  <span class="va">x_train</span>,</span>
<span>  <span class="va">x_explain</span>,</span>
<span>  <span class="va">approach</span>,</span>
<span>  <span class="va">prediction_zero</span>,</span>
<span>  output_size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">n_combinations</span>,</span>
<span>  <span class="va">group</span>,</span>
<span>  <span class="va">n_samples</span>,</span>
<span>  <span class="va">n_batches</span>,</span>
<span>  <span class="va">seed</span>,</span>
<span>  <span class="va">keep_samp_for_vS</span>,</span>
<span>  <span class="va">feature_specs</span>,</span>
<span>  MSEv_uniform_comb_weights <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"normal"</span>,</span>
<span>  horizon <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  xreg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  train_idx <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  explain_idx <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  explain_y_lags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  explain_xreg_lags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  group_lags <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  <span class="va">timing</span>,</span>
<span>  <span class="va">verbose</span>,</span>
<span>  is_python <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-x-train">x_train<a class="anchor" aria-label="anchor" href="#arg-x-train"></a></dt>
<dd><p>Matrix or data.frame/data.table.
Contains the data used to estimate the (conditional) distributions for the features
needed to properly estimate the conditional expectations in the Shapley formula.</p></dd>


<dt id="arg-x-explain">x_explain<a class="anchor" aria-label="anchor" href="#arg-x-explain"></a></dt>
<dd><p>A matrix or data.frame/data.table.
Contains the the features, whose predictions ought to be explained.</p></dd>


<dt id="arg-approach">approach<a class="anchor" aria-label="anchor" href="#arg-approach"></a></dt>
<dd><p>Character vector of length <code>1</code> or one less than the number of features.
All elements should, either be <code>"gaussian"</code>, <code>"copula"</code>, <code>"empirical"</code>, <code>"ctree"</code>, <code>"vaeac"</code>,
<code>"categorical"</code>, <code>"timeseries"</code>, <code>"independence"</code>, <code>"regression_separate"</code>, or <code>"regression_surrogate"</code>.
The two regression approaches can not be combined with any other approach. See details for more information.</p></dd>


<dt id="arg-prediction-zero">prediction_zero<a class="anchor" aria-label="anchor" href="#arg-prediction-zero"></a></dt>
<dd><p>Numeric.
The prediction value for unseen data, i.e. an estimate of the expected prediction without conditioning on any
features.
Typically we set this value equal to the mean of the response variable in our training data, but other choices
such as the mean of the predictions in the training data are also reasonable.</p></dd>


<dt id="arg-output-size">output_size<a class="anchor" aria-label="anchor" href="#arg-output-size"></a></dt>
<dd><p>TODO: Document</p></dd>


<dt id="arg-n-combinations">n_combinations<a class="anchor" aria-label="anchor" href="#arg-n-combinations"></a></dt>
<dd><p>Integer.
If <code>group = NULL</code>, <code>n_combinations</code> represents the number of unique feature combinations to sample.
If <code>group != NULL</code>, <code>n_combinations</code> represents the number of unique group combinations to sample.
If <code>n_combinations = NULL</code>, the exact method is used and all combinations are considered.
The maximum number of combinations equals <code>2^m</code>, where <code>m</code> is the number of features.</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>List.
If <code>NULL</code> regular feature wise Shapley values are computed.
If provided, group wise Shapley values are computed. <code>group</code> then has length equal to
the number of groups. The list element contains character vectors with the features included
in each of the different groups.</p></dd>


<dt id="arg-n-samples">n_samples<a class="anchor" aria-label="anchor" href="#arg-n-samples"></a></dt>
<dd><p>Positive integer.
Indicating the maximum number of samples to use in the
Monte Carlo integration for every conditional expectation. See also details.</p></dd>


<dt id="arg-n-batches">n_batches<a class="anchor" aria-label="anchor" href="#arg-n-batches"></a></dt>
<dd><p>Positive integer (or NULL).
Specifies how many batches the total number of feature combinations should be split into when calculating the
contribution function for each test observation.
The default value is NULL which uses a reasonable trade-off between RAM allocation and computation speed,
which depends on <code>approach</code> and <code>n_combinations</code>.
For models with many features, increasing the number of batches reduces the RAM allocation significantly.
This typically comes with a small increase in computation time.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>Positive integer.
Specifies the seed before any randomness based code is being run.
If <code>NULL</code> the seed will be inherited from the calling environment.</p></dd>


<dt id="arg-keep-samp-for-vs">keep_samp_for_vS<a class="anchor" aria-label="anchor" href="#arg-keep-samp-for-vs"></a></dt>
<dd><p>Logical.
Indicates whether the samples used in the Monte Carlo estimation of v_S should be returned
(in <code>internal$output</code>)</p></dd>


<dt id="arg-feature-specs">feature_specs<a class="anchor" aria-label="anchor" href="#arg-feature-specs"></a></dt>
<dd><p>List. The output from <code><a href="get_model_specs.html">get_model_specs()</a></code> or <code><a href="get_data_specs.html">get_data_specs()</a></code>.
Contains the 3 elements:</p><dl><dt>labels</dt>
<dd><p>Character vector with the names of each feature.</p></dd>

<dt>classes</dt>
<dd><p>Character vector with the classes of each features.</p></dd>

<dt>factor_levels</dt>
<dd><p>Character vector with the levels for any categorical features.</p></dd>


</dl></dd>


<dt id="arg-msev-uniform-comb-weights">MSEv_uniform_comb_weights<a class="anchor" aria-label="anchor" href="#arg-msev-uniform-comb-weights"></a></dt>
<dd><p>Logical. If <code>TRUE</code> (default), then the function weights the combinations
uniformly when computing the MSEv criterion. If <code>FALSE</code>, then the function use the Shapley kernel weights to
weight the combinations when computing the MSEv criterion. Note that the Shapley kernel weights are replaced by the
sampling frequency when not all combinations are considered.</p></dd>


<dt id="arg-type">type<a class="anchor" aria-label="anchor" href="#arg-type"></a></dt>
<dd><p>Character.
Either "normal" or "forecast" corresponding to function <code>setup()</code> is called from,
correspondingly the type of explanation that should be generated.</p></dd>


<dt id="arg-horizon">horizon<a class="anchor" aria-label="anchor" href="#arg-horizon"></a></dt>
<dd><p>Numeric.
The forecast horizon to explain. Passed to the <code>predict_model</code> function.</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>Matrix, data.frame/data.table or a numeric vector.
Contains the endogenous variables used to estimate the (conditional) distributions
needed to properly estimate the conditional expectations in the Shapley formula
including the observations to be explained.</p></dd>


<dt id="arg-xreg">xreg<a class="anchor" aria-label="anchor" href="#arg-xreg"></a></dt>
<dd><p>Matrix, data.frame/data.table or a numeric vector.
Contains the exogenous variables used to estimate the (conditional) distributions
needed to properly estimate the conditional expectations in the Shapley formula
including the observations to be explained.
As exogenous variables are used contemporaneusly when producing a forecast,
this item should contain nrow(y) + horizon rows.</p></dd>


<dt id="arg-train-idx">train_idx<a class="anchor" aria-label="anchor" href="#arg-train-idx"></a></dt>
<dd><p>Numeric vector
The row indices in data and reg denoting points in time to use when estimating the conditional expectations in
the Shapley value formula.
If <code>train_idx = NULL</code> (default) all indices not selected to be explained will be used.</p></dd>


<dt id="arg-explain-idx">explain_idx<a class="anchor" aria-label="anchor" href="#arg-explain-idx"></a></dt>
<dd><p>Numeric vector
The row indices in data and reg denoting points in time to explain.</p></dd>


<dt id="arg-explain-y-lags">explain_y_lags<a class="anchor" aria-label="anchor" href="#arg-explain-y-lags"></a></dt>
<dd><p>Numeric vector.
Denotes the number of lags that should be used for each variable in <code>y</code> when making a forecast.</p></dd>


<dt id="arg-explain-xreg-lags">explain_xreg_lags<a class="anchor" aria-label="anchor" href="#arg-explain-xreg-lags"></a></dt>
<dd><p>Numeric vector.
If <code>xreg != NULL</code>, denotes the number of lags that should be used for each variable in <code>xreg</code> when making a forecast.</p></dd>


<dt id="arg-group-lags">group_lags<a class="anchor" aria-label="anchor" href="#arg-group-lags"></a></dt>
<dd><p>Logical.
If <code>TRUE</code> all lags of each variable are grouped together and explained as a group.
If <code>FALSE</code> all lags of each variable are explained individually.</p></dd>


<dt id="arg-timing">timing<a class="anchor" aria-label="anchor" href="#arg-timing"></a></dt>
<dd><p>Logical.
Whether the timing of the different parts of the <code><a href="explain.html">explain()</a></code> should saved in the model object.</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>An integer specifying the level of verbosity. If <code>0</code>, <code>shapr</code> will stay silent.
If <code>1</code>, it will print information about performance. If <code>2</code>, some additional information will be printed out.
Use <code>0</code> (default) for no verbosity, <code>1</code> for low verbose, and <code>2</code> for high verbose.
TODO: Make this clearer when we end up fixing this and if they should force a progressr bar.</p></dd>


<dt id="arg-is-python">is_python<a class="anchor" aria-label="anchor" href="#arg-is-python"></a></dt>
<dd><p>Logical. Indicates whether the function is called from the Python wrapper. Default is FALSE which is
never changed when calling the function via <code><a href="explain.html">explain()</a></code> in R. The parameter is later used to disallow
running the AICc-versions of the empirical as that requires data based optimization.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Further arguments passed to specific approaches</p></dd>

</dl></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Nikolai Sellereite, Martin Jullum, Lars Henry Berge Olsen, Annabelle Redelmeier, Jon Lachmann, Norsk Regnesentral.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

